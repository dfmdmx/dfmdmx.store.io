
<!-- ---------includes--------- -->
{% include messages.html %}
<!-- ---------includes--------- -->

<div class='form-contact'>
  <p id="message-text"></p>

  <form class="pure-form cnc">
    <fieldset class="pure-group">
        <input name="name" type="text" class="pure-input-1-2" placeholder="Nombre" >
        <input name="email" type="email" class="pure-input-1-2" placeholder="Correo electrónico" >
    </fieldset>
    <fieldset>
        <label for="file">Select a file</label>
        <input id='upload-file' name="file" type="file">
    </fieldset>

      <button type="submit" class="pure-button pure-input-1-2 pure-button-primary">Enviar <i class="fas fa-paper-plane"></i></button>
  </form>

</div>

<script>
  var form_cnc = $( ".cnc" );
  form_cnc.on('submit', function( event ) {
    event.preventDefault();
    {%- if jekyll.environment == 'production' -%}
    grecaptcha.ready(function() {
        grecaptcha.execute("{{ site.data.callback.captchakey }}", {action: 'form_cnc'}).then(function(token) {
    {%- else -%}
    var token = 'dummy';
    {%- endif -%}
           var method = 'form_cnc';
           var args = form_cnc.serializeFormJSON();
           args['token'] = token;
           var uploadfiles = $('#upload-file').prop('files');
           remoteCall(method,args,uploadfiles).done(function(response){
             $( ".cnc" ).trigger('reset');
             messageInfo('¡Excelente!');
           }).fail(function(){
             messageAlert('Nop.');
           });

    {%- if jekyll.environment == 'production' -%}
        });
    });
    {%- endif -%}

  });

</script>
