<!-- ---------includes--------- -->
{% include dialogs.html %}
<!-- ---------includes--------- -->

<style>
.form-login {
  margin-bottom: 20px;
}
</style>

<div class='form-login'>
<form class="pure-form login">

    <fieldset class="pure-group">
        <input name="email" type="email" class="pure-input-1-2" placeholder="Email" >
        <input name="password" type="password" class="pure-input-1-2" placeholder="password" >
    </fieldset>

    <button type="submit" class="pure-button pure-input-1-2 pure-button-primary">LogIn <i class="fas fa-sign-in-alt"></i></button>
</form>
<br>
<a class="u-email" href="mailto:{{ site.email }}"><i class="far fa-envelope"></i> {{ site.email }}</a><br>
<small><b>Note:</b> We do not store payment information.</small><br>
</div>

<a href="/signin" class="pure-button pure-button-primary">SignIn <i class="fas fa-users"></i></a>

<script src="https://www.google.com/recaptcha/api.js?render={{ site.data.callback.captchakey }}"></script>
<script>

$( ".login" ).on('submit', function( event ) {
  event.preventDefault();
  {%- if jekyll.environment == 'production' -%}
  grecaptcha.ready(function() {
      grecaptcha.execute("{{ site.data.callback.captchakey }}", {action: 'form_login'}).then(function(token) {
  {%- else -%}
  var token = 'dummy';
  {%- endif -%}
         var method = 'form_login';
         var args = $( ".login" ).serializeFormJSON();
         args['token'] = token;
         console.log(args);
         remoteCall(method,args).done(function(response){
           console.log(response);
           $( ".login" ).trigger('reset');
           showDialog(response.dialogtitle,response.dialogmessage);
         });


  {%- if jekyll.environment == 'production' -%}
      });
  });
  {%- endif -%}

});

</script>
