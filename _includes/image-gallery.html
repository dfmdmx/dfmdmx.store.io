<!-- ---------includes--------- -->
{% include liquid_data.html %}
{% include lightbox.html %}
{% include remote-calls.html %}
<!-- ---------includes--------- -->

<style>
    .image-gallery {overflow: auto; margin-left: -1%!important; margin-top:20px;margin-bottom:40px;}
    .image-gallery a {float: left; display: block; margin: 0 0 1% 1%; width: 19%; text-align: center; text-decoration: none!important;}
    .image-gallery a img {width: 100%; display: block; filter: grayscale(66%);}
    .image-gallery a img:hover {filter: grayscale(0%);}
</style>

{% if include.folder %}
  {% assign folder = include.folder %}
{% else %}
  {% assign folder= binderPath | append: include.name %}
{% endif %}

<div class="image-gallery">
  {% for file in site.static_files %}{% if file.path contains folder %}
  {% if file.extname == '.PNG' or file.extname == '.png' or file.extname == '.jpg' or file.extname == '.jpeg' or file.extname == '.JPG' or file.extname == '.JPEG' or file.extname == '.png'%}
  {% assign filenameparts = file.path | split: "/" %}
  {% assign filename = filenameparts | last | replace: file.extname,"" %}
  <a class="imagelink" href="{{ file.path }}" title="{{ filename }}"><img src="{{site.data.callback.th-url}}{{ file.path | replace: '/','_' }}" alt="{{ filename }}" title="{{ filename }}" /></a>
  {% endif %}{% endif %}{% endfor %}
</div>

<script>
$(document).ready(function() {
  var images = [];
  $('.image-gallery').find('.imagelink').each(function(){
    images.push(this.href);
  });
  var args = {'urls':images}
  var method = 'crop_images'
  remoteCall(method,args).done(function(response){
    }).fail(function(){
      console.log(method + ' error');
    }).always(function(){
    });
});
</script>
