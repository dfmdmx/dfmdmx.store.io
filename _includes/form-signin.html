<!-- ---------includes--------- -->
{% include messages.html %}
<!-- ---------includes--------- -->

<style>
.form-signin {
  margin-bottom: 20px;
}
.overdoingthings {
  font-family: 'Inconsolata', monospace;
  font-size: 16px;
}
</style>

<div class='form-signin'>
  <p id="message-text"></p>
  <form class="pure-form signin">
      <fieldset class="pure-group">
          <legend class="pure-input-1-2" >Usuario</legend>
          <input name="name" type="text" class="pure-input-1-2" placeholder="Nombre" >
          <input name="email" type="email" class="pure-input-1-2" placeholder="Correo electrónico" >
          <input name="password" type="password" class="pure-input-1-2" placeholder="Contraseña" >
          <small><b class="overdoingthings">*</b>  Mínimo ocho caracteres.</small><br>
          <small><b class="overdoingthings">*</b>  No uses la misma contraseña que en el banco o correo.</small><br>
      </fieldset>
      <fieldset class="pure-group">
          <legend class="pure-input-1-2" >Dirección de entrega</legend>
          <input name="calle" class="pure-input-1-2" placeholder="Calle" >
          <input name="numero_ext" class="pure-input-1-2" placeholder="No. Exterior" >
          <input name="numero_int" class="pure-input-1-2" placeholder="No. Interior" >
          <input name="colonia" class="pure-input-1-2" placeholder="Colonia" >
          <input name="municipio" class="pure-input-1-2" placeholder="Alcaldia/Municipio" >
          <input name="estado" class="pure-input-1-2" placeholder="Estado" >
          <input name="cp" class="pure-input-1-2" placeholder="CP" >
      </fieldset>
  <small><b>Atención: </b><br>Al registrarte estarás aceptando los <a href='#'>Términos y Condiciones.</a></small><br>
      <button type="submit" class="pure-button pure-input-1-2 pure-button-primary">Registrar <i class="fas fa-users"></i></button>
  </form>
<br>
  <small><b class="overdoingthings">No</b>  almacenamos datos bancarios.</small><br>
  <small><b class="overdoingthings">No</b>  enviamos correos con anuncios.</small><br>
  <small><b class="overdoingthings">Si</b>  contestamos correos con dudas.</small><br>
  <br>
  <a class="u-email" href="mailto:{{ site.email }}"><i class="far fa-envelope"></i> {{ site.email }}</a><br>
</div>

<script src="https://www.google.com/recaptcha/api.js?render={{ site.data.callback.captchakey }}"></script>
<script>

$( ".signin" ).on('submit', function( event ) {
  event.preventDefault();
  {%- if jekyll.environment == 'production' -%}
  grecaptcha.ready(function() {
      grecaptcha.execute("{{ site.data.callback.captchakey }}", {action: 'form_signin'}).then(function(token) {
  {%- else -%}
  var token = 'dummy';
  {%- endif -%}
         var method = 'form_signin';
         var args = $( ".signin" ).serializeFormJSON();
         args['token'] = token;
         console.log(args);
         remoteCall(method,args).done(function(response){
           window.location.replace("/login");
         }).fail(function(){
           messageAlert('Error: Puede que el correo ya este registrado.');
         });

  {%- if jekyll.environment == 'production' -%}
      });
  });
  {%- endif -%}

});

</script>
